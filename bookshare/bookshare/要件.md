# 目的

- アプリを作りながら、js→react→ts→nextjs と学習していくこと

# 題材

- 社内のメンバー専用の、みんなの本の登録&レビュー評価が見れるアプリ

# ステップ

## サイクル 1：バニラ JavaScript で実装 ✅ 完了

- ✅ 本の JSON をローカルに持つ（`public/books.json`）
- ✅ バニラ JS で BookList と BookDetail ページを実装
- ✅ DOM 操作の基礎を学ぶ
- ✅ ダミーレビューを表示（POST はまだしない）

**実装内容**:

- `vanilla/main.js`: 本の一覧表示（`renderStars`, `createBookCard`関数）
- `vanilla/detail.js`: 本の詳細とレビュー一覧表示
- データ構造: `reviews`配列で複数のレビューに対応

**学んだこと**:

- JS ファイルに HTML が混在して解読しづらい
- データ構造を変えたら修正箇所が多くなる
- DOM 操作の手間（`innerHTML`の再構築など）

## サイクル 2：サイクル 1 を React に移行 🔄 進行中

- ✅ React でコンポーネント化（BookCard、BookList など）
- ✅ 状態管理の基礎（`useState`の理解）
- ✅ プロップスとステートの理解
- ✅ 型定義の学習（`book.ts`で`Book`と`Review`型を定義）
- ⏳ 本の JSON をローカルに持つ（`books.json`を`fetch`する処理）
- ⏳ BookList と BookDetail ページ（BookDetail は未実装）
- ⏳ ダミーレビューを表示（POST はまだしない）

**実装済み**:

- `src/App.tsx`: 状態管理（`books`, `selectedBookId`）
- `src/components/BookList.tsx`: 一覧表示コンポーネント
- `src/components/BookCard.tsx`: カード表示コンポーネント
- `src/types/book.ts`: TypeScript 型定義（`Book`, `Review`）

**次回実装予定**:

- `App.tsx`で`books.json`を`fetch`する処理（`useEffect`）
- `BookDetail`コンポーネントの実装
- `App.tsx`で`selectedBookId`に応じた条件分岐

## サイクル 3：サイクル 1,2 を TypeScript に移行 ⏸️ 一部前倒し済み

- ✅ 型定義の学習（`book.ts`で既に実装済み）
- ✅ 型安全性の理解（React コンポーネントで型を使用中）
- ⏸️ 残りの機能実装後に完了予定

**注**: サイクル 2 で既に TypeScript を使用しているため、サイクル 3 は実質的に完了に近い状態

## サイクル 4：Next.js でルーティング追加

- Next.js App Router でページを作る
- /books → 全件表示
- /books/[id] → ダイナミックルート
- 試しに generateStaticParams や generateMetadata も触る

## サイクル 5：バックエンド追加（Node.js + TypeScript + Next.js）

- Route Handlers:
  - GET /api/books
  - POST /api/books
  - POST /api/books/[id]/reviews
- 最初はローカル配列でも OK
- いけそうなら Prisma + PostgreSQL（今まさに触ってるやつ）を接続

## サイクル 6：認証追加

- NextAuth.js + Google Provider
- ドメイン制限（email.endsWith('@xxxxx') で弾く）
- 認証済ユーザーだけが
  - 本を登録できる
  - レビューを書ける
- 認証していないと /login にリダイレクト
